Objective: Superuser Access

Most operating systems have a superuser that has all power over the system. In Red Hat Enterprise
Linux, it is the root user.

sudo --- Super User do

To give privalages to local users. 

sudo is a method/way we provide privalages to local users

# Direct (Individually)
Syntax			username ALL=(ALL)	ALL
# Indirect (Groups)
Syntax			%groupname ALL=(ALL)	ALL

1st ALL -- Host
2nd ALL -- Users(Root, system, regular)	
3rd ALL -- All Commands. 


Example:

Full -- Username /%groupname  ALL=(ALL) NOPASSWD:ALL

Linked -- Username/%groupname ALL=(ALL) NOPASSWD: /usr/sbin/useradd, /usr/sbin/usermod 

------------------------------------------------------------------------

/etc/sudoers --> Main Sudo configuration
/etc/sudoers.d/ --> Random File


Note: The most frequent use for the su command is to get a command-line interface
(shell prompt) that runs as another user, typically root. However, you can use it
with the su command -c option to run an arbitrary program as another user. This
behavior is similar to the Windows runas utility. Run info su to view more details.


---------------------------------------------------------------------------

			su			su -			sudo
Become new user		Yes			Yes			Per esclated command
Enviroment		Current user's		New user's		Current user's
Password required	New user's		New user's		Current user's
Privleges		Same as new user	Same as new user	Defined by configuration
Activity logged		su command only		su command only		Per esclated command


----------------------------------------------------------------------------

Imp Log: Historically, UNIX systems use membership in the wheel group to grant or control
superuser access. RHEL 6 and earlier versions do not grant the wheel group any
special privileges by default. System administrators who have previously used this
group for a non-standard purpose should update a previous configuration, to avoid
unexpected and unauthorized users obtaining administrative access on RHEL 7 and
later systems.

--------------------------------------------------------------------------

#How to configure sudo

The /etc/sudoers file is the main configuration file for the sudo command.

To avoid problems if multiple administrators try to edit the file at the same time, you can edit it only with the special
visudo command. The visudo editor also validates the file, to ensure no syntax errors.

For example: 
the following line from the /etc/sudoers file enables sudo access for wheel
group members:

%wheel ALL=(ALL:ALL) ALL

• The %wheel string is the user or group that the rule applies to. The % symbol before the word
wheel specifies a group.

• The ALL=(ALL:ALL) command specifies that on any host with this file (the first ALL), users in
the wheel group can run commands as any other user (the second ALL) and any other group
(the third ALL) on the system.

• The final ALL command specifies that users in the wheel group can run any command.

------------------------------------------------------------------------

Note: Placing configuration files under the /etc/sudoers.d directory is convenient. You
can enable or disable sudo access by copying a file into the directory or removing it
from the directory.

In this course, you create and remove files in the /etc/sudoers.d directory to
configure sudo access for users and groups.
-------------------------------------------------------------------------

#Example


vim /etc/sudoers.d/sudo-perm

Add the following:

b ALL=(root) NOPASSWD: /usr/sbin/usermod, /usr/sbin/groupadd, /usr/sbin/groupmems
%TATA ALL=(root) NOPASSWD: !/usr/sbin/usermod, !/usr/sbin/groupadd, !/usr/sbin/groupmems

#the members of TATA group won't be able to run the commands. 

------------------------------------------------------------------------

#Usermod Options

usermod options:		 Usage
-a,--append			Use it with the -G option to add the secondary groups to the user's current set of 
				group memberships instead of replacing
				the set of secondary groups with a new set.
-c, --comment			COMMENT Add the COMMENT text to the comment field.
-d, --home			HOME_DIR Specify a home directory for the user account.
-g, --gid			GROUP Specify the primary group for the user account.
-G, --groups			GROUPS Specify a comma-separated list of secondary groups for the user account.
-L, --lock			Lock the user account.
-m, --move-home			Move the user's home directory to a new location. You must use it with the -d option.
-s, --shell			SHELL Specify a particular login shell for the user account.
-U, --unlock			Unlock the user account.


-------------------------------------------------------------------------------------------------

#UID Ranges

Red Hat Enterprise Linux uses specific UID numbers and ranges of numbers for specific purposes.
• UID 0:	 The superuser (root) account UID.
• UID 1-200:	 System account UIDs statically assigned to system processes.
• UID 201-999:  UIDs assigned to system processes that do not own files on this system.
		 Software that requires an unprivileged UID is dynamically assigned UID from this available pool.
• UID 1000+:	The UID range to assign to regular, unprivileged users.
