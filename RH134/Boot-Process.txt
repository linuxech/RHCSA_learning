Control Boot Process

Boot Process
	- BIOS
		-- Perform POST
		-- Loads MBR

	- MBR
		-- Load GRUB 2 Boot Loader

	- GRUB2
		-- Load the vmlinuz kernel image
		-- Extracts the contents of initramfs image

	- Kernel
		-- Loads necessary drivers modules for the initrd image
		-- Start system 1st process - Systemd

	- Systemd
		-- Read configuration file from the /etc/systemd directory
		-- Read file linked by /etc/systemd/system/default.target
		-- Brings the system to the state defined by the system target.
--------------------------------------------------------------------

CLI and GUI
	Different login console. 
---	---	---	---	---	---	---	---	---	

/boot
	contain the boot file of the system.

uname -r -- to list the system Info 

--------------------------------------------------------------------
What is Target?

graphical.target
		-- Provide GUI prompt for login.

multi-user.target
		-- Text based login, it is a CLI login prompt.

rescue.target
		-- To break root user password. You need to have console login.
			
emergency.target
		-- Error in /etc/fstab file.
		-- It causes the system to enter in emergency mode.
		-- They don't have write permission.

- How to check the current target?
	systemctl get-default

- How to switch to multi-user.target?
	systemctl isolate multi-user.target
	-- It will give you a CLI terminal. 

- How to switch back to graphical-user.target?
	systemctl isolate graphical.target

- When you update the default target.
		-- It will make changes to the default target configuration file. 

Note: When a system is installed with CLI installed, you would not be able to switch to graphical.target

--------------------------------------------------------------------------------
####################Most Important ###########################################
- How to break root password?

	-- Start the rescue.target

To access that root shell, follow these steps:
1. Reboot the system.
2. Interrupt the boot loader countdown by pressing any key, except Enter.
3. Move the cursor to the kernel entry to boot.
4. Press e to edit the selected entry.
5. Move the cursor to the kernel command line (the line that starts with linux).
6. Append rd.break. With that option, the system breaks just before the system hands control
from the initramfs to the actual system.
7. Press Ctrl+x to boot with the changes.
	
-- This will switch to enter in the emergency mode
Here you need to type the following:

1. Remount /sysroot as read/write.

mount -o remount,rw /sysroot

2. Switch into a chroot jail, where /sysroot is treated as the root of the file-system tree.

chroot /sysroot

3. Set a new root password.

passwd root			\\ Here you need to enter the new password. 


4. Make sure that all unlabeled files, including /etc/shadow at this point, get relabeled during boot.

 touch /.autorelabel

5. Type exit twice. The first command exits the chroot jail, and the second command exits the initramfs debug shell.

At this point, the system continues booting, performs a full SELinux relabel, and then reboots
again.

------------------------------------------------------------------------------------------------

In case you made any wrong entry in /etc/fstab file..

When you reboot the system, it will enter in the Emergency mode. 
It will give few options::


Give root password for maintenance
(or press Control-D to continue):
-- Enter in the root user by typing the password. 
mount -a 		\\ It will give you the cause and file where the error was caused.

mount -o remount,rw /			\\This will give the read and write permission.

vim /etc/fstab				\\ Comment the file using # and save the file. 

-- This will give you the system login prompt again. i.e is fix the error. 

---------------------------------------------------------------------------------------------------



